# 歩行分析アプリ開発 TODOリスト（TDD方式）

> t-wada推奨のテスト駆動開発（TDD）アプローチに基づく開発計画
>
> **TDDの5ステップサイクル**: テストリスト作成 → テスト実装・失敗確認 → 実装・通過 → リファクタリング → 次へ

## 🎯 学習フェーズ：真似から入る

### フェーズ1：基礎学習（写経・チュートリアル）

- [ ] React + TypeScript基本チュートリアルの写経
- [ ] Jest/Testing Libraryテスト基礎の写経  
- [ ] WebRTC基本実装の写経
- [ ] MediaPipe基本実装の写経

## 🏗️ 環境構築フェーズ

### フェーズ2：テスト環境セットアップ

- [ ] プロジェクト初期化（React + TypeScript + Vite）
- [ ] テストフレームワーク設定（Jest + Testing Library）
- [ ] 基本的なCIパイプライン設定
- [ ] markdownlint、ESLint、Prettier設定

## 🚀 MVP開発フェーズ（最小限の動作する製品）

### フェーズ3：カメラアクセス機能（TDDサイクル1）

**テストリスト**:

- [ ] ✅ **RED**: カメラ許可要求のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: カメラアクセス実装・テスト通過
- [ ] 🔄 **REFACTOR**: コード品質改善
- [ ] ✅ **RED**: カメラストリーム取得のテスト作成・失敗確認  
- [ ] 🟢 **GREEN**: ストリーム取得実装・テスト通過
- [ ] 🔄 **REFACTOR**: エラーハンドリング改善

### フェーズ4：映像表示機能（TDDサイクル2）

**テストリスト**:

- [ ] ✅ **RED**: Canvas要素描画のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: Canvas映像表示実装・テスト通過  
- [ ] 🔄 **REFACTOR**: 描画パフォーマンス最適化
- [ ] ✅ **RED**: 映像サイズ調整のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: レスポンシブ表示実装・テスト通過
- [ ] 🔄 **REFACTOR**: UI/UX改善

### フェーズ5：基本姿勢検出（TDDサイクル3）

**テストリスト**:

- [ ] ✅ **RED**: MediaPipe Pose初期化のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: Pose検出実装・テスト通過
- [ ] 🔄 **REFACTOR**: パフォーマンス最適化
- [ ] ✅ **RED**: 骨格点座標取得のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 座標データ取得実装・テスト通過  
- [ ] 🔄 **REFACTOR**: データ構造最適化

## 🔄 フィードバック・設計見直しフェーズ

### フェーズ6：MVP動作確認と改良

- [ ] MVP統合テスト実行
- [ ] 実際の使用感確認（心理的効果の体験）
- [ ] 設計・実装方針の見直し
- [ ] テストリストの更新・追加

## 📈 機能拡張フェーズ（インクリメンタル開発）

### フェーズ7：重心計算機能（TDDサイクル4）

**テストリスト**:

- [ ] ✅ **RED**: 重心座標計算のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 重心算出アルゴリズム実装・テスト通過
- [ ] 🔄 **REFACTOR**: 計算精度向上
- [ ] ✅ **RED**: 重心軌跡記録のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 軌跡データ保存実装・テスト通過
- [ ] 🔄 **REFACTOR**: メモリ効率化

### フェーズ8：歩行パターン判定（TDDサイクル5）

**テストリスト**:

- [ ] ✅ **RED**: 安定性指標計算のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 標準偏差・変動係数実装・テスト通過
- [ ] 🔄 **REFACTOR**: 数値計算最適化
- [ ] ✅ **RED**: キャットウォーク判定のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 判定ロジック実装・テスト通過
- [ ] 🔄 **REFACTOR**: 判定精度向上
- [ ] ✅ **RED**: 酔歩判定のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 酔歩判定実装・テスト通過
- [ ] 🔄 **REFACTOR**: 閾値調整・ファインチューニング

### フェーズ9：顔認識機能（TDDサイクル6）

**テストリスト**:

- [ ] ✅ **RED**: Face Mesh初期化のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 顔検出実装・テスト通過
- [ ] 🔄 **REFACTOR**: 検出精度向上
- [ ] ✅ **RED**: 顔座標取得のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 顔領域特定実装・テスト通過
- [ ] 🔄 **REFACTOR**: 座標精度改善

### フェーズ10：エフェクト適用（TDDサイクル7）

**テストリスト**:

- [ ] ✅ **RED**: 猫エフェクト描画のテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 猫耳・ひげ描画実装・テスト通過
- [ ] 🔄 **REFACTOR**: エフェクト品質向上
- [ ] ✅ **RED**: 酔っぱらいエフェクトのテスト作成・失敗確認
- [ ] 🟢 **GREEN**: 赤ら顔・ふらつき演出実装・テスト通過
- [ ] 🔄 **REFACTOR**: 視覚効果最適化

## 🔧 品質向上フェーズ

### フェーズ11：統合リファクタリング

- [ ] 全体のコード品質レビュー
- [ ] パフォーマンス最適化
- [ ] メモリリーク対策
- [ ] エラーハンドリング強化
- [ ] アクセシビリティ改善

### フェーズ12：最終テスト・デプロイ

- [ ] E2Eテスト実装
- [ ] クロスブラウザテスト
- [ ] モバイル対応テスト
- [ ] Vercel/Netlifyデプロイ設定
- [ ] 本番環境動作確認

## 📊 判定基準（テスト仕様）

### キャットウォーク（秩序的）判定条件

- 重心移動の標準偏差 < 閾値α
- 歩幅変動係数 < 閾値β  
- 速度変動係数 < 閾値γ
- 軌跡の直線性指標 > 閾値δ

### 酔歩（不規則）判定条件

- 重心移動の標準偏差 > 閾値α
- 歩幅変動係数 > 閾値β
- 速度変動係数 > 閾値γ  
- 軌跡の直線性指標 < 閾値δ

## 🎯 期待する成果物

- [ ] 動作するきれいなコード（Clean Code that Works）
- [ ] 包括的なテストスイート
- [ ] 重心軌跡の可視化グラフ
- [ ] 安定性数値スコア（0-100）
- [ ] 判定結果と根拠の表示
- [ ] 顔エフェクト適用映像
